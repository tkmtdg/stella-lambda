module.exports=function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){const o=t(1),n=t(2),i=t(3);e.exports=class{constructor({json:e,jsonFieldName:r="raw_cookies",logger:t,logLevel:i}={}){if(void 0===e)throw new Error("json is not set");if(this.json=e,"string"!=typeof r)throw new TypeError("jsonFieldName must be a string");this.jsonFiledName=r,"object"==typeof t&&t.constructor===n?this.logger=t:(this.logger=o.getLogger("stella"),this.logger.level="debug"),"string"==typeof i&&(this.logger.level=i),this.logger.debug("json:",e)}bake(){let e;try{e=JSON.parse(this.json)}catch(e){throw new Error("json parse failed")}if(void 0===e[this.jsonFiledName])throw new Error(`json ${this.jsonFiledName} is not set`);const r=e[this.jsonFiledName];if(!1===Array.isArray(r))throw new TypeError(`json ${this.jsonFiledName} must be an array`);if(0===r.length)throw new Error(`json ${this.jsonFiledName} is empty`);const t=[];r.forEach(e=>{if("string"!=typeof e)return void this.logger.warn("not a string:",e);if(-1===e.indexOf("="))return void this.logger.warn("not a set-cookie string:",e);const r=e.trim();/(\r\n|\r|\n)/.test(r)?this.logger.warn("includes CR and/or LF:",e):t.push(e)});let o=[];return 0===t.length?this.logger.warn("no set-cookie string left"):o=i(t),this.logger.debug("set-cookies:",o),o}}},function(e,r){e.exports=require("log4js")},function(e,r){e.exports=require("log4js/lib/logger")},function(e,r){e.exports=require("lodash.uniq")}]);